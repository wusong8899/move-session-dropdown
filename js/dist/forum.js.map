{"version":3,"file":"forum.js","sources":["../src/forum/index.tsx"],"sourcesContent":["import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport Navigation from 'flarum/common/components/Navigation';\nimport SessionDropdown from 'flarum/forum/components/SessionDropdown';\nimport avatar from 'flarum/common/helpers/avatar';\nimport Mithril from 'mithril';\n\napp.initializers.add('wusong8899-move-session-dropdown', () => {\n  extend(Navigation.prototype, 'view', function (vnode: Mithril.VnodeDOM<any, any>) {\n    // Only work on mobile devices (viewport width <= 767px)\n    if (window.innerWidth > 767) {\n      return;\n    }\n\n    if (!vnode || !vnode.children || !Array.isArray(vnode.children)) {\n      return;\n    }\n\n    // Only add if user is logged in\n    if (!app.session.user) {\n      return;\n    }\n\n    // Check if we already added the avatar component to avoid duplication\n    const hasAvatarComponent = vnode.children.some((child: any) => \n      child && child.attrs && child.attrs.className && \n      child.attrs.className.includes('Navigation-avatar')\n    );\n\n    if (!hasAvatarComponent) {\n      // Add mobile avatar component\n      vnode.children.push(\n        <li className=\"item-avatar Navigation-avatar\">\n          <button \n            className=\"Button Button--flat Avatar-button\"\n            onclick={() => {\n              // Find and trigger the original session dropdown click\n              const originalDropdown = document.querySelector('#header-secondary .SessionDropdown .Dropdown-toggle, #drawer .SessionDropdown .Dropdown-toggle');\n              if (originalDropdown) {\n                (originalDropdown as HTMLElement).click();\n              }\n            }}\n          >\n            {avatar(app.session.user, { className: 'Avatar--size32' })}\n          </button>\n        </li>\n      );\n    }\n  });\n});"],"names":["app","extend","Navigation","vnode","child","originalDropdown","avatar"],"mappings":"gCAOAA,EAAI,aAAa,IAAI,mCAAoC,IAAM,CAC7DC,EAAAA,OAAOC,EAAW,UAAW,OAAQ,SAAUC,EAAmC,CAWhF,GATI,OAAO,WAAa,KAIpB,CAACA,GAAS,CAACA,EAAM,UAAY,CAAC,MAAM,QAAQA,EAAM,QAAQ,GAK1D,CAACH,EAAI,QAAQ,KACf,OAIyBG,EAAM,SAAS,KAAMC,GAC9CA,GAASA,EAAM,OAASA,EAAM,MAAM,WACpCA,EAAM,MAAM,UAAU,SAAS,mBAAmB,CAAA,GAKlDD,EAAM,SAAS,KACb,EAAC,KAAA,CAAG,UAAU,+BAAA,EACZ,EAAC,SAAA,CACC,UAAU,oCACV,QAAS,IAAM,CAEb,MAAME,EAAmB,SAAS,cAAc,gGAAgG,EAC5IA,GACDA,EAAiC,MAAA,CAEtC,CAAA,EAECC,EAAON,EAAI,QAAQ,KAAM,CAAE,UAAW,iBAAkB,CAAA,CAE7D,CAAA,CAGN,CAAC,CACH,CAAC"}