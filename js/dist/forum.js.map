{"version":3,"file":"forum.js","sources":["../src/forum/index.tsx"],"sourcesContent":["import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport Navigation from 'flarum/common/components/Navigation';\nimport SessionDropdown from 'flarum/forum/components/SessionDropdown';\nimport Mithril from 'mithril';\n\napp.initializers.add('wusong8899-move-session-dropdown', () => {\n  extend(Navigation.prototype, 'view', function (vnode: Mithril.VnodeDOM<any, any>) {\n    // Only work on mobile devices (viewport width <= 767px)\n    if (window.innerWidth > 767) {\n      return;\n    }\n\n    // Only work on homepage\n    const routeName = app.current.get('routeName');\n    if (routeName !== '') {\n      return;\n    }\n\n    if (!vnode || !vnode.children || !Array.isArray(vnode.children)) {\n      return;\n    }\n\n    // Only add if user is logged in\n    if (!app.session.user) {\n      return;\n    }\n\n    // Check if we already added the session component to avoid duplication\n    const hasSessionComponent = vnode.children.some((child: any) => \n      child && child.attrs && child.attrs.className && \n      child.attrs.className.includes('Navigation-session')\n    );\n\n    if (!hasSessionComponent) {\n      // Add SessionDropdown component to navigation\n      vnode.children.push(\n        <li className=\"item-session Navigation-session\">\n          <SessionDropdown />\n        </li>\n      );\n    }\n  });\n});"],"names":["app","extend","Navigation","vnode","child","SessionDropdown"],"mappings":"gCAMAA,EAAI,aAAa,IAAI,mCAAoC,IAAM,CAC7DC,EAAAA,OAAOC,EAAW,UAAW,OAAQ,SAAUC,EAAmC,CAiBhF,GAfI,OAAO,WAAa,KAKNH,EAAI,QAAQ,IAAI,WAAW,IAC3B,IAId,CAACG,GAAS,CAACA,EAAM,UAAY,CAAC,MAAM,QAAQA,EAAM,QAAQ,GAK1D,CAACH,EAAI,QAAQ,KACf,OAI0BG,EAAM,SAAS,KAAMC,GAC/CA,GAASA,EAAM,OAASA,EAAM,MAAM,WACpCA,EAAM,MAAM,UAAU,SAAS,oBAAoB,CAAA,GAKnDD,EAAM,SAAS,OACZ,KAAA,CAAG,UAAU,iCAAA,EACZ,EAACE,MAAgB,CACnB,CAAA,CAGN,CAAC,CACH,CAAC"}